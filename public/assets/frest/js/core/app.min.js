$(document).ready(function(){

    // notify client before subs expire - 2 h
    setInterval(function() {
        //your jQuery ajax code
        $.ajax({
            type:"GET",
            cache:false,
            url:"/user/subscribe/checkSubscriptionExpire",
            data:'',
            success: function(data) {
                if( data.expire_soon === true ){
                    console.log('expire soon')
                    // show alert after header
                    if( $('.expire-soon').length === 0 ){
                        $('.hd-left').append('<span class="expire-soon badge bg-danger" data-bs-toggle="tooltip" data-bs-placement="bottom" title=" تفعيلك سينتهي في خلال ساعة. يرجي تجديد الاشتراك في أقرب وقت "> <i class="fa-solid fa-triangle-exclamation"></i> </span>');
                    }

                    if( $('.active-sub .right-sec .renew_sub').length ){
                        $('.active-sub .right-sec .renew_sub').show();
                    }

                }
            }
        });
    }, 1000 * 60 * 5); // where X is your every X minutes


    $('#landing_style').on('change', function(e){

        var optionSelected = $("option:selected", this);
        var valueSelected = this.value;
        $('.style_'+valueSelected).show()
        $('.style-preview img').not('.style_'+valueSelected).hide();

    })


    var charge_phone = document.querySelector("#charge-phone");
    var iti = intlTelInput(charge_phone, {
        initialCountry: 'au'
    });
    $("#charge-phone").on('change', function(e) {
        e.preventDefault();
        let dialCode = '+' + iti.selectedCountryData.dialCode;
        $('#charge_country_code').val(dialCode)
        let phone_num =  iti.telInput.value.replace(dialCode, '');
        $('#charge_phone_num').val(phone_num)
       
    });

});



function showAlert(title=null, description=null, showConfirmButton=false, timer=2000, icon='success', position='center'){
    Swal.fire({
        position: position,
        icon: icon,
        title: title,
        text: description,
        showConfirmButton: showConfirmButton,
        timer: timer
    })
}


